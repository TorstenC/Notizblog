<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Verschlüsselte Seite</title>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.0.0/crypto-js.js"></script>
</head>
<body>
    <div id="loginDiv">
        <h1>Verschlüsselte Seite</h1>
        <input type="password" id="password" placeholder="Passwort eingeben">
        <button onclick="decryptContent()">Entschlüsseln</button>
    </div>

    <div id="content" style="display:none;">
        <!--
            key = b'Sixteen-byte-key' # Schlüssel muss 16, 24 oder 32 Bytes lang sein
            cipher = AES.new(key, AES.MODE_CBC)
            ct_bytes = cipher.encrypt(pad(body_inner_html.encode('utf-8'), AES.block_size))
            iv = b64encode(cipher.iv).decode('utf-8')
            ct = b64encode(ct_bytes).decode('utf-8')
            base64_string = iv + ct
        -->
        <div id="encryptedContent">kRITIz3njEh82LPYdgVJvg==yiKhqPso7tvaTpRjFBb3uPgDwZRFdbl+Ffn0ythRay4O9bSUJGALHLhRsab29lokW8hgd15QW3IY173CGj0box6FYvkRZqxZYAkP+AhI/ee75mbeqOVhypqRSbrHzdMEDBD9Aagr+zpcFHHyRV+/qIuya+O6ACbDtiPADU+7BMlVsa/f0IRPp3MsxsZ1NaIa4jCCFnstXuONI1fOg6hDwjZ8kyKxVNDKzEbpGCqvj2ATcgzcYMil7Ozzc9hXmSwMtkjWbQyDNfmKblWM3ONxt/u8FFw+sxVXw81VJ4gccPoStfOKUeIudDhAh8b3ssdrF08tg4k/JxqVV0dGW4EmcYzd7t4R1cRELOPIk1P/noFtGYcJoJBI1yY0UMX6puBINc1Kvu7Bptq/YWM42wl8Z6G9W8mR+27nUVgmDNFgeFyKjigksorV31fQ3OpjL17pCSL3X9z4dfiHA7PUGaeGqgr+s0mUA93RG2d2SmGmAOOiFN/uA9hIFKkqqPul+vGTkS49TZ5Szh8KQ9dLLhkKQ/CIpwWrpDUlf7depGFTKV7zmMw/72Se0bkkoNC+tqUKp3J3OGtkR6W/bB3FOjEUnFWpdgVIadawOcW6t5xvb2A9LiprRVYBRHkWa7DpcTO3oRKIk3xMcHN8JeqqgpuDXoaE5mS/LxnARUjq1W/bcDZR4p/8j70gnYBjj9R/z1hTMi1N37nSb2waL4p+tQTAl7MQK6CKELXF1i9XiR0+BMZ5jnONtErZO2nfEippvy94d55vA24qs2WWst3bky+wEbkymkz+NFtbIzZLFKx97sK+nbZVYpMWKRwoQV8BxiMZbO09YSGYXRQBMhbFC0IjBDZ6h73ls5GUszrbnv6eyE/xG0MQ7RoRSur6qbFnpd/CiyEP+NkjiscHGl9S4im3aYnoNBDHT0SZZcOci9sjxqt+U6CjHOEHhG3PFnGAlMX2KGFd+ZojuoecFy0zTvid1lp8dImqSwsS2tWGGVS0QGYABwxjL/yJL7Nt4aiUGeMKVBSw8yupQBGGUEu+fYwQN+4fwLWC4Q4uyCTBiIO12w7nEGpN9QgXvKWRamgcZPAp4eZ8FmgrNA/UZqLGcGg8a/GhhnWKHDp28ca6xaiy1Het5rmSz40n6Wkhdk2WVJIpzctNix9FLcxRKeIiTruHCk9j0ygAfTomJyfsSpYkEooyBscGD/KO3crCZzzgJvYUzZ3MdbflvRq6M9/0vf58fgtX+lXdr1u/Nn9cZK8Ye6DNF3M5ApgrKbbte///cs4E0kydqG1ki8Gc3eqfppFf9PAOZE+C5wOA6eDeQ+0S5IIFSBF45uO3bZAvMqba4sAFIcxuxM71i/ORGNBJojM4LRhSF/hJ6jYeY8GYU3F81G1k1t1and1nFIH03gn/ry7FFP4QJgCMa7Zivr0oLCy1b7rypQ1RDBYR0uPXa+GEsxvd8dAsQwQ7pqsM+X/swOS6BZTpgnTU8yG8oYOROHrHlJggaVVRxjddfKzpU6qxeU5VBzdjddNkJX1wtQMh6G6jZvIlAPPegjb3R680UfN66DDIrCHcmFQLfgPk+szgfGFlWcHcYKn1S4sQUx6Uqp8EC84MbIle6IRhMMD2DMGM83pUV0enurCgXTpVq0YtiTqkzwgBUoFVlPtg2JuB/89hvIsi7aOufxWsBfpg15SJRRp5fWl6E/FE/9sS7MhRIppM7kjwDKgGUTq/NK8uledtawXwjbHBfeFMHkheFlcajsBgBgyCJq3bqGoDUk3kVK+kuVVTT3VHP7tnzmOrf5SUAD6SgJ9C+UKWg73fN8LOpOMBroSu7LkgWkGm6Pq7QlQ=</div>
    </div>

    <script>
        function setCookie(name, value, days) {
            var expires = "";
            if (days) {
                var date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/TorstenC/Notizblog";
        }

        function getCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function decryptContent() {
            var password = document.getElementById('password').value;
            var encryptedContent = document.getElementById('encryptedContent').innerText;
            try {
                var key = CryptoJS.enc.Utf8.parse(password);
                var iv = CryptoJS.enc.Base64.parse(encryptedContent.slice(0, 24));
                var encrypted = encryptedContent.slice(24);
                var decrypted = CryptoJS.AES.decrypt(encrypted, key, { iv: iv });
                var originalText = decrypted.toString(CryptoJS.enc.Utf8);
                if (originalText) {
                    document.getElementById('content').innerHTML = originalText;
                    document.getElementById('content').style.display = 'block';
                    document.getElementById('loginDiv').style.display = 'none';
                    setCookie('password', password, 30);
                } else {
                    alert('Falsches Passwort!');
                }
            } catch (e) {
                alert('Fehler bei der Entschlüsselung!');
            }
        }

        window.onload = function() {
            var password = getCookie('password');
            if (password) {
                document.getElementById('password').value = password;
                decryptContent();
            }
        }
    </script>
</body>
</html>
